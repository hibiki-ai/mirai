<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generic and SSH Remote Launch Configuration — remote_config • mirai</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Generic and SSH Remote Launch Configuration — remote_config"><meta property="og:description" content="remote_config provides a flexible generic framework for generating
    the shell commands to deploy daemons remotely.
ssh_config generates a remote configuration for launching daemons over
    SSH, with the option of SSH tunnelling."><meta property="og:image" content="https://shikokuchuo.net/mirai/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mirai</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.13.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/mirai.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/parallel.html">mirai - Parallel Integration</a>
    </li>
    <li>
      <a href="../articles/plumber.html">mirai - Plumber Integration</a>
    </li>
    <li>
      <a href="../articles/promises.html">mirai - Promises Integration</a>
    </li>
    <li>
      <a href="../articles/shiny.html">mirai - Shiny Integration</a>
    </li>
    <li>
      <a href="../articles/torch.html">mirai - Torch Integration</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/shikokuchuo/mirai/" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://shikokuchuo.net/" class="external-link">
    <span class="fa fa-cube"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generic and SSH Remote Launch Configuration</h1>
    <small class="dont-index">Source: <a href="https://github.com/shikokuchuo/mirai/blob/HEAD/R/launchers.R" class="external-link"><code>R/launchers.R</code></a></small>
    <div class="hidden name"><code>remote_config.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>remote_config</code> provides a flexible generic framework for generating
    the shell commands to deploy daemons remotely.</p>
<p><code>ssh_config</code> generates a remote configuration for launching daemons over
    SSH, with the option of SSH tunnelling.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">remote_config</span><span class="op">(</span>command <span class="op">=</span> <span class="cn">NULL</span>, args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">""</span>, <span class="st">"."</span><span class="op">)</span>, rscript <span class="op">=</span> <span class="st">"Rscript"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ssh_config</span><span class="op">(</span></span>
<span>  <span class="va">remotes</span>,</span>
<span>  timeout <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  tunnel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  command <span class="op">=</span> <span class="st">"ssh"</span>,</span>
<span>  rscript <span class="op">=</span> <span class="st">"Rscript"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>command</dt>
<dd><p>the command used to effect the daemon launch on the remote
machine as a character string (e.g. <code>'ssh'</code>). Defaults to 'ssh' for
<code>ssh_config</code>, although may be substituted for the full path to a
specific SSH application. The default NULL for <code>remote_config</code> does
not effect any launches, but causes <code><a href="launch_local.html">launch_remote</a></code> to return
the shell commands for manual deployment on remote machines.</p></dd>


<dt>args</dt>
<dd><p>(optional) arguments passed to 'command', as a character vector
that must include <code>"."</code> as an element, which will be substituted
for the daemon launch command. Alternatively, a list of such character
vectors to effect multiple launches (one for each list element).</p></dd>


<dt>rscript</dt>
<dd><p>(optional) name / path of the Rscript executable on the remote
machine. The default assumes 'Rscript' is on the executable search path.
Prepend the full path if necessary. If launching on Windows, 'Rscript'
should be replaced with 'Rscript.exe'.</p></dd>


<dt>remotes</dt>
<dd><p>the character URL or vector of URLs to SSH into, using the
'ssh://' scheme and including the port open for SSH connections (defaults
to 22 if not specified), e.g. 'ssh://10.75.32.90:22' or 'ssh://nodename'.</p></dd>


<dt>timeout</dt>
<dd><p>[default 10] maximum time allowed for connection setup in
seconds.</p></dd>


<dt>tunnel</dt>
<dd><p>[default FALSE] logical value whether to use SSH reverse
tunnelling. If TRUE, a tunnel is created between the same ports (as
specified in 'url') on the local and remote machines. Setting to TRUE
requires access to 'url' in the evaluation context and will error if not
called from a relevant function.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list in the required format to be supplied to the 'remote' argument
    of <code><a href="launch_local.html">launch_remote</a></code>, <code><a href="daemons.html">daemons</a></code>, or <code><a href="make_cluster.html">make_cluster</a></code>.</p>
    </div>
    <div id="ssh-direct-connections">
    <h2>SSH Direct Connections</h2>
    


<p>The simplest use of SSH is to execute the daemon launch command on a
    remote machine, for it to dial back to the host / dispatcher URL.</p>
<p>It is assumed that SSH key-based authentication is already in place. The
    relevant port on the host must also be open to inbound connections from
    the remote machine.</p>
    </div>
    <div id="ssh-tunnelling">
    <h2>SSH Tunnelling</h2>
    


<p>Use of SSH tunnelling provides a convenient way to launch remote nodes
    without requiring the remote machine to be able to access the host.
    Often firewall configurations or security policies may prevent opening a
    port to accept outside connections.</p>
<p>In these cases SSH tunnelling offers a solution by creating a tunnel once
    the initial SSH connection is made. For simplicity, this SSH tunnelling
    implementation uses the same port on both the side of the host and that
    of the corresponding node. SSH key-based authentication must also already
    be in place.</p>
<p>Tunnelling requires the hostname for 'url' specified when setting up
    <code><a href="daemons.html">daemons</a></code> to be either '127.0.0.1' or 'localhost'. This is as
    the tunnel is created between <code>127.0.0.1:port</code> or equivalently
    <code>localhost:port</code> on each machine. The host listens to <code>port</code> on
    its machine and the remotes each dial into <code>port</code> on their own
    respective machines.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">remote_config</span><span class="op">(</span>command <span class="op">=</span> <span class="st">"ssh"</span>, args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-fTp 22 10.75.32.90"</span>, <span class="st">"."</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $command</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "ssh"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $args</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-fTp 22 10.75.32.90" "."                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rscript</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Rscript"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ssh_config</span><span class="op">(</span>remotes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ssh://10.75.32.90:222"</span>, <span class="st">"ssh://nodename"</span><span class="op">)</span>, timeout <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $command</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "ssh"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $args</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $args[[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-o ConnectTimeout=5 -fTp 222" "10.75.32.90"                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "."                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $args[[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-o ConnectTimeout=5 -fTp 22" "nodename"                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "."                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rscript</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Rscript"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># launch 2 daemons on the remote machines 10.75.32.90 and 10.75.32.91 using</span></span></span>
<span class="r-in"><span><span class="co"># SSH, connecting back directly to the host URL over a TLS connection:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="daemons.html">daemons</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  url <span class="op">=</span> <span class="fu"><a href="host_url.html">host_url</a></span><span class="op">(</span>tls <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  remote <span class="op">=</span> <span class="fu">ssh_config</span><span class="op">(</span></span></span>
<span class="r-in"><span>    remotes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ssh://10.75.32.90:222"</span>, <span class="st">"ssh://10.75.32.91:222"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    timeout <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># launch 2 nodes on the remote machine 10.75.32.90 using SSH tunnelling over</span></span></span>
<span class="r-in"><span><span class="co"># port 5555 ('url' hostname must be 'localhost' or '127.0.0.1'):</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cl</span> <span class="op">&lt;-</span> <span class="fu"><a href="make_cluster.html">make_cluster</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  url <span class="op">=</span> <span class="st">"tcp://localhost:5555"</span>,</span></span>
<span class="r-in"><span>  remote <span class="op">=</span> <span class="fu">ssh_config</span><span class="op">(</span></span></span>
<span class="r-in"><span>    remotes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ssh://10.75.32.90"</span>, <span class="st">"ssh://10.75.32.90"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    timeout <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>    tunnel <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Charlie Gao.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

      </footer></div>

  


  

  </body></html>

